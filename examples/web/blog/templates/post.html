{% extends "base.html" %}

{% block title %}{{ post.title }} - A Bitsetter's Blog{% endblock %}

{% block meta %}
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://stevenosborn.com/post/{{ post.slug }}">
  <meta property="og:title" content="{{ post.title }}">
  <meta property="og:description" content="{{ post.content | truncate(length=200) | striptags }}">
  {% if post.social_image %}
  <meta property="og:image" content="https://stevenosborn.com/uploads/{{ post.social_image }}">
  <meta property="og:image:alt" content="{{ post.title }}">
  {% endif %}
  <meta property="og:site_name" content="A Bitsetter's Blog">
  <meta property="article:published_time" content="{{ post.published_at }}">
  <meta property="article:modified_time" content="{{ post.updated_at }}">
  <meta property="article:author" content="{{ post.author_username }}">
  {% for tag in post.tags %}
  <meta property="article:tag" content="{{ tag.name }}">
  {% endfor %}

  <!-- Twitter -->
  <meta name="twitter:card" content="{% if post.social_image %}summary_large_image{% else %}summary{% endif %}">
  <meta name="twitter:url" content="https://stevenosborn.com/post/{{ post.slug }}">
  <meta name="twitter:title" content="{{ post.title }}">
  <meta name="twitter:description" content="{{ post.content | truncate(length=200) | striptags }}">
  {% if post.social_image %}
  <meta name="twitter:image" content="https://stevenosborn.com/uploads/{{ post.social_image }}">
  <meta name="twitter:image:alt" content="{{ post.title }}">
  {% endif %}
  <meta name="twitter:creator" content="@stevenosborn">

  <!-- Standard meta tags -->
  <meta name="description" content="{{ post.content | truncate(length=200) | striptags }}">
  <meta name="author" content="{{ post.author_username }}">
  <meta name="keywords" content="{% for tag in post.tags %}{{ tag.name }}{% if not loop.last %}, {% endif %}{% endfor %}">
{% endblock %}

{% block content %}
<div class="grid">
  <section>
    {% include "post_card.html" %}

    <footer>
      <a href="/" role="button" class="outline" style="border: none; background: transparent;">‚Üê Back to Home</a>
    </footer>
  </section>

  <aside>
    {% include "bio.html" %}

    {% if popular_posts %}
    <article>
      <h3>Popular Posts</h3>
      {% for popular in popular_posts %}
        <div class="popular-post">
          <a href="/post/{{ popular.slug }}">{{ popular.title }}</a>
          <span class="view-count">({{ popular.view_count }} views)</span>
        </div>
      {% endfor %}
    </article>
    {% endif %}

    {% include "tags_card.html" %}
  </aside>
</div>
{% endblock %}
